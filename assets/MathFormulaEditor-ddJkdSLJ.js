import{r as a,j as e}from"./index-DbOqXvr9.js";import"./react-vendor-DS08_OVb.js";import"./pdf-vendor-1qLBXhNR.js";const S={åŸºæœ¬è¿ç®—:[{symbol:"+",latex:"+"},{symbol:"-",latex:"-"},{symbol:"Ã—",latex:"\\times"},{symbol:"Ã·",latex:"\\div"},{symbol:"Â±",latex:"\\pm"},{symbol:"âˆ“",latex:"\\mp"},{symbol:"Â·",latex:"\\cdot"},{symbol:"âˆ—",latex:"\\ast"},{symbol:"âŠ•",latex:"\\oplus"},{symbol:"âŠ—",latex:"\\otimes"}],å…³ç³»ç¬¦å·:[{symbol:"=",latex:"="},{symbol:"â‰ ",latex:"\\neq"},{symbol:"<",latex:"<"},{symbol:">",latex:">"},{symbol:"â‰¤",latex:"\\leq"},{symbol:"â‰¥",latex:"\\geq"},{symbol:"â‰ˆ",latex:"\\approx"},{symbol:"â‰¡",latex:"\\equiv"},{symbol:"âˆ¼",latex:"\\sim"},{symbol:"âˆˆ",latex:"\\in"},{symbol:"âˆ‰",latex:"\\notin"},{symbol:"âŠ‚",latex:"\\subset"},{symbol:"âŠƒ",latex:"\\supset"},{symbol:"âŠ†",latex:"\\subseteq"},{symbol:"âŠ‡",latex:"\\supseteq"},{symbol:"âˆ",latex:"\\propto"}],å¸Œè…Šå­—æ¯:[{symbol:"Î±",latex:"\\alpha"},{symbol:"Î²",latex:"\\beta"},{symbol:"Î³",latex:"\\gamma"},{symbol:"Î´",latex:"\\delta"},{symbol:"Îµ",latex:"\\epsilon"},{symbol:"Î¶",latex:"\\zeta"},{symbol:"Î·",latex:"\\eta"},{symbol:"Î¸",latex:"\\theta"},{symbol:"Î¹",latex:"\\iota"},{symbol:"Îº",latex:"\\kappa"},{symbol:"Î»",latex:"\\lambda"},{symbol:"Î¼",latex:"\\mu"},{symbol:"Î½",latex:"\\nu"},{symbol:"Î¾",latex:"\\xi"},{symbol:"Ï€",latex:"\\pi"},{symbol:"Ï",latex:"\\rho"},{symbol:"Ïƒ",latex:"\\sigma"},{symbol:"Ï„",latex:"\\tau"},{symbol:"Ï…",latex:"\\upsilon"},{symbol:"Ï†",latex:"\\phi"},{symbol:"Ï‡",latex:"\\chi"},{symbol:"Ïˆ",latex:"\\psi"},{symbol:"Ï‰",latex:"\\omega"},{symbol:"Î“",latex:"\\Gamma"},{symbol:"Î”",latex:"\\Delta"},{symbol:"Î˜",latex:"\\Theta"},{symbol:"Î›",latex:"\\Lambda"},{symbol:"Î",latex:"\\Xi"},{symbol:"Î ",latex:"\\Pi"},{symbol:"Î£",latex:"\\Sigma"},{symbol:"Î¦",latex:"\\Phi"},{symbol:"Î¨",latex:"\\Psi"},{symbol:"Î©",latex:"\\Omega"}],ä¸Šä¸‹æ ‡:[{symbol:"xÂ²",latex:"x^2"},{symbol:"xÂ³",latex:"x^3"},{symbol:"xâ¿",latex:"x^{n}"},{symbol:"xâ‚",latex:"x_1"},{symbol:"xâ‚‚",latex:"x_2"},{symbol:"xáµ¢",latex:"x_{i}"},{symbol:"x^y_z",latex:"x^{y}_{z}"}],åˆ†æ•°æ ¹å·:[{symbol:"âˆšx",latex:"\\sqrt{x}"},{symbol:"â¿âˆšx",latex:"\\sqrt[n]{x}"},{symbol:"a/b",latex:"\\frac{a}{b}"},{symbol:"áµƒâ„áµ¦",latex:"\\dfrac{a}{b}"},{symbol:"âˆ›",latex:"\\sqrt[3]{x}"}],æ±‚å’Œç§¯åˆ†:[{symbol:"âˆ‘",latex:"\\sum"},{symbol:"âˆ‘â¿áµ¢â‚Œâ‚",latex:"\\sum_{i=1}^{n}"},{symbol:"âˆ«",latex:"\\int"},{symbol:"âˆ«áµ‡â‚",latex:"\\int_{a}^{b}"},{symbol:"âˆ¬",latex:"\\iint"},{symbol:"âˆ­",latex:"\\iiint"},{symbol:"âˆ®",latex:"\\oint"},{symbol:"âˆ",latex:"\\prod"},{symbol:"âˆâ¿áµ¢â‚Œâ‚",latex:"\\prod_{i=1}^{n}"},{symbol:"lim",latex:"\\lim_{x \\to \\infty}"},{symbol:"limâ†’0",latex:"\\lim_{x \\to 0}"}],ç®­å¤´:[{symbol:"â†’",latex:"\\rightarrow"},{symbol:"â†",latex:"\\leftarrow"},{symbol:"â†”",latex:"\\leftrightarrow"},{symbol:"â‡’",latex:"\\Rightarrow"},{symbol:"â‡",latex:"\\Leftarrow"},{symbol:"â‡”",latex:"\\Leftrightarrow"},{symbol:"â†‘",latex:"\\uparrow"},{symbol:"â†“",latex:"\\downarrow"},{symbol:"âŸ¶",latex:"\\longrightarrow"},{symbol:"âŸµ",latex:"\\longleftarrow"}],ç‰¹æ®Šç¬¦å·:[{symbol:"âˆ",latex:"\\infty"},{symbol:"âˆ‚",latex:"\\partial"},{symbol:"âˆ‡",latex:"\\nabla"},{symbol:"âˆ€",latex:"\\forall"},{symbol:"âˆƒ",latex:"\\exists"},{symbol:"âˆ…",latex:"\\emptyset"},{symbol:"âˆª",latex:"\\cup"},{symbol:"âˆ©",latex:"\\cap"},{symbol:"âˆ§",latex:"\\land"},{symbol:"âˆ¨",latex:"\\lor"},{symbol:"Â¬",latex:"\\lnot"},{symbol:"âŠ¥",latex:"\\perp"},{symbol:"âˆ¥",latex:"\\parallel"},{symbol:"âˆ ",latex:"\\angle"},{symbol:"Â°",latex:"^\\circ"},{symbol:"â€¦",latex:"\\ldots"},{symbol:"â‹¯",latex:"\\cdots"},{symbol:"â‹®",latex:"\\vdots"},{symbol:"â‹±",latex:"\\ddots"}],æ‹¬å·:[{symbol:"( )",latex:"\\left( \\right)"},{symbol:"[ ]",latex:"\\left[ \\right]"},{symbol:"{ }",latex:"\\left\\{ \\right\\}"},{symbol:"âŸ¨ âŸ©",latex:"\\langle \\rangle"},{symbol:"| |",latex:"\\left| \\right|"},{symbol:"|| ||",latex:"\\left\\| \\right\\|"},{symbol:"âŒŠ âŒ‹",latex:"\\lfloor \\rfloor"},{symbol:"âŒˆ âŒ‰",latex:"\\lceil \\rceil"}],çŸ©é˜µ:[{symbol:"2Ã—2",latex:"\\begin{pmatrix} a & b \\\\ c & d \\end{pmatrix}"},{symbol:"3Ã—3",latex:"\\begin{pmatrix} a & b & c \\\\ d & e & f \\\\ g & h & i \\end{pmatrix}"},{symbol:"[2Ã—2]",latex:"\\begin{bmatrix} a & b \\\\ c & d \\end{bmatrix}"},{symbol:"[3Ã—3]",latex:"\\begin{bmatrix} a & b & c \\\\ d & e & f \\\\ g & h & i \\end{bmatrix}"},{symbol:"|2ï¿½ï¿½2|",latex:"\\begin{vmatrix} a & b \\\\ c & d \\end{vmatrix}"},{symbol:"cases",latex:"\\begin{cases} x & x > 0 \\\\ -x & x \\leq 0 \\end{cases}"}],æ–‡æœ¬:[{symbol:"æ–‡æœ¬",latex:"\\text{æ–‡æœ¬}"},{symbol:"ä¸­æ–‡",latex:"\\text{ä¸­æ–‡}"},{symbol:"åŠ ç²—",latex:"\\textbf{ç²—ä½“}"},{symbol:"æ–œä½“",latex:"\\textit{æ–œä½“}"},{symbol:"ç©ºæ ¼",latex:"\\quad"},{symbol:"å¤§ç©ºæ ¼",latex:"\\qquad"},{symbol:"å°ç©ºæ ¼",latex:"\\,"}]},P=[{name:"äºŒæ¬¡å…¬å¼",latex:"x = \\frac{-b \\pm \\sqrt{b^2 - 4ac}}{2a}",category:"ä»£æ•°"},{name:"å‹¾è‚¡å®šç†",latex:"a^2 + b^2 = c^2",category:"å‡ ä½•"},{name:"æ¬§æ‹‰å…¬å¼",latex:"e^{i\\pi} + 1 = 0",category:"æ•°å­¦"},{name:"å¯¼æ•°å®šä¹‰",latex:"f'(x) = \\lim_{h \\to 0} \\frac{f(x+h) - f(x)}{h}",category:"å¾®ç§¯åˆ†"},{name:"æ³°å‹’å±•å¼€",latex:"f(x) = \\sum_{n=0}^{\\infty} \\frac{f^{(n)}(a)}{n!}(x-a)^n",category:"å¾®ç§¯åˆ†"},{name:"æ­£æ€åˆ†å¸ƒ",latex:"f(x) = \\frac{1}{\\sigma\\sqrt{2\\pi}} e^{-\\frac{(x-\\mu)^2}{2\\sigma^2}}",category:"ç»Ÿè®¡"},{name:"éº¦å…‹æ–¯éŸ¦æ–¹ç¨‹",latex:"\\nabla \\cdot \\vec{E} = \\frac{\\rho}{\\epsilon_0}",category:"ç‰©ç†"},{name:"è–›å®šè°”æ–¹ç¨‹",latex:"i\\hbar\\frac{\\partial}{\\partial t}\\Psi = \\hat{H}\\Psi",category:"ç‰©ç†"},{name:"çŸ©é˜µä¹˜æ³•",latex:"\\begin{pmatrix} a & b \\\\ c & d \\end{pmatrix} \\begin{pmatrix} e & f \\\\ g & h \\end{pmatrix} = \\begin{pmatrix} ae+bg & af+bh \\\\ ce+dg & cf+dh \\end{pmatrix}",category:"çº¿æ€§ä»£æ•°"},{name:"è¡Œåˆ—å¼",latex:"\\begin{vmatrix} a & b \\\\ c & d \\end{vmatrix} = ad - bc",category:"çº¿æ€§ä»£æ•°"},{name:"åˆ†éƒ¨ç§¯åˆ†",latex:"\\int u \\, dv = uv - \\int v \\, du",category:"å¾®ç§¯åˆ†"},{name:"æŸ¯è¥¿ä¸ç­‰å¼",latex:"\\left(\\sum_{i=1}^n a_i b_i\\right)^2 \\leq \\left(\\sum_{i=1}^n a_i^2\\right) \\left(\\sum_{i=1}^n b_i^2\\right)",category:"ä»£æ•°"}],H=()=>{const[r,b]=a.useState(""),[h,d]=a.useState(""),[o,c]=a.useState(""),[f,i]=a.useState(null),[_,k]=a.useState(!1),[L,v]=a.useState(!1),[$,y]=a.useState(!1),[q,M]=a.useState(""),[x,w]=a.useState("symbols"),[j,E]=a.useState("åŸºæœ¬è¿ç®—"),[g,O]=a.useState("none"),u=a.useRef(null),n=a.useRef(null),N=a.useCallback(t=>{if(!t.trim()){d(""),c(""),i(null);return}if(!window.katex){i("KaTeX åº“æœªåŠ è½½,è¯·åˆ·æ–°é¡µé¢é‡è¯•ã€‚");return}try{const l=window.katex.renderToString(t,{throwOnError:!1,displayMode:!0,output:"html",strict:!1,trust:!0});d(l);const s=window.katex.renderToString(t,{throwOnError:!1,displayMode:!0,output:"mathml",strict:!1,trust:!0});c(s),i(null)}catch(l){console.error("KaTeX render error:",l),i(l.message||"å…¬å¼æ¸²æŸ“å¤±è´¥"),d(""),c("")}},[]);a.useEffect(()=>(n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{N(r)},300),()=>{n.current&&clearTimeout(n.current)}),[r,N]);const m=a.useCallback(t=>{M(t),k(t.includes("LaTeX")||t.includes("Word")),v(t.includes("MathML")),y(!1),setTimeout(()=>y(!0),1700),setTimeout(()=>{k(!1),v(!1),y(!1)},2e3)},[]),R=a.useCallback(()=>{if(!r)return;let t=r;switch(g){case"$$":t=`$$${r}$$`;break;case"$":t=`$${r}$`;break;case"equation":t=`\\begin{equation}
${r}
\\end{equation}`;break;case"none":default:t=r;break}navigator.clipboard.writeText(t).then(()=>{m("å·²å¤åˆ¶ LaTeX æ ¼å¼åˆ°å‰ªè´´æ¿!")}).catch(l=>console.error("Failed to copy LaTeX: ",l))},[r,g,m]),X=a.useCallback(async()=>{if(o)try{const t=new Blob([o],{type:"text/html"}),l=new ClipboardItem({"text/html":t,"text/plain":new Blob([o],{type:"text/plain"})});await navigator.clipboard.write([l]),m("å·²å¤åˆ¶åˆ° Word æ ¼å¼!")}catch(t){console.error("Failed to copy for Word with ClipboardItem: ",t);try{await navigator.clipboard.writeText(o),m("å·²å¤åˆ¶åˆ° Word æ ¼å¼!")}catch(l){console.error("Failed to copy for Word: ",l)}}},[o,m]),F=a.useCallback(t=>{if(!u.current)return;const l=u.current,s=l.selectionStart,p=l.selectionEnd,T=r,W=T.substring(0,s)+t+T.substring(p);b(W),setTimeout(()=>{const C=s+t.length;l.setSelectionRange(C,C),l.focus()},0)},[r]),I=a.useCallback(()=>{b(""),d(""),c(""),i(null)},[]);return e.jsxs("div",{className:"flex w-full flex-col items-center px-4 py-6 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex w-full max-w-7xl flex-col items-center gap-2 text-center mb-6",children:[e.jsx("p",{className:"text-3xl font-black leading-tight tracking-tighter text-gray-900 dark:text-white sm:text-4xl",children:"LaTeX æ•°å­¦å…¬å¼ç¼–è¾‘å™¨"}),e.jsx("p",{className:"text-base font-normal text-gray-500 dark:text-gray-400",children:"åœ¨çº¿ç¼–è¾‘ LaTeX æ•°å­¦å…¬å¼,å®æ—¶é¢„è§ˆå¹¶æ”¯æŒå¤åˆ¶ä¸ºå¤šç§æ ¼å¼ã€‚"})]}),(_||L)&&e.jsx("div",{className:`fixed top-8 left-1/2 -translate-x-1/2 z-50 ${$?"animate-fade-out-up":"animate-fade-in-down"}`,children:e.jsxs("div",{className:"bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-2",children:[e.jsx("span",{className:"material-symbols-outlined text-xl",children:"check_circle"}),e.jsx("span",{className:"font-medium",children:q})]})}),e.jsxs("div",{className:"w-full max-w-7xl",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-t-xl border border-gray-200 dark:border-gray-700 flex items-center",children:[e.jsx("button",{onClick:()=>w("symbols"),style:x==="symbols"?{backgroundColor:"#607AFB",color:"white"}:{},className:`px-6 py-3 text-sm font-medium transition-colors ${x==="symbols"?"rounded-tl-xl":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:"å¿«æ·ç¬¦å·"}),e.jsx("button",{onClick:()=>w("templates"),style:x==="templates"?{backgroundColor:"#607AFB",color:"white"}:{},className:`px-6 py-3 text-sm font-medium transition-colors ${x==="templates"?"":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:"å…¬å¼æ¨¡æ¿"}),e.jsxs("button",{onClick:I,className:"ml-auto mr-3 flex items-center gap-1 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded text-sm hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[e.jsx("span",{className:"material-symbols-outlined text-base",children:"delete"}),"æ¸…ç©º"]})]}),x==="symbols"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 border-x border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"flex overflow-x-auto border-b border-gray-200 dark:border-gray-700 scrollbar-thin",children:Object.keys(S).map(t=>e.jsx("button",{onClick:()=>E(t),className:`px-4 py-2 text-sm font-medium whitespace-nowrap transition-colors ${j===t?"bg-blue-50 dark:bg-blue-900/30 text-primary border-b-2 border-primary":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:t},t))}),e.jsx("div",{className:"p-4 grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 lg:grid-cols-12 gap-2 max-h-[200px] overflow-y-auto",children:S[j].map((t,l)=>e.jsx("button",{onClick:()=>F(t.latex),className:"h-10 flex items-center justify-center bg-gray-50 dark:bg-gray-700 hover:bg-primary/10 dark:hover:bg-primary/20 border border-gray-200 dark:border-gray-600 rounded text-lg transition-colors",title:t.latex,children:t.symbol},l))})]}),x==="templates"&&e.jsx("div",{className:"bg-white dark:bg-gray-800 border-x border-gray-200 dark:border-gray-700 p-4 max-h-[300px] overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:P.map((t,l)=>{let s="";try{window.katex&&(s=window.katex.renderToString(t.latex,{throwOnError:!1,displayMode:!0,output:"html",strict:!1,trust:!0}))}catch(p){console.error("Template render error:",p)}return e.jsxs("button",{onClick:()=>b(t.latex),className:"text-left p-3 bg-gray-50 dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded hover:border-primary dark:hover:border-primary transition-colors group",title:t.latex,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-900 dark:text-gray-100",children:t.name}),e.jsx("span",{className:"text-xs px-2 py-0.5 bg-primary/10 text-primary rounded",children:t.category})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded p-2 flex items-center justify-center min-h-[60px] overflow-x-auto",children:s?e.jsx("div",{className:"text-gray-900 dark:text-gray-100",style:{fontSize:"0.9rem"},dangerouslySetInnerHTML:{__html:s}}):e.jsx("span",{className:"text-xs text-gray-400",children:"é¢„è§ˆåŠ è½½ä¸­..."})})]},l)})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-0 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 border-b lg:border-b-0 lg:border-r border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"LaTeX ä»£ç "}),e.jsxs("span",{className:"text-xs text-gray-400",children:[r.length," å­—ç¬¦"]})]}),e.jsx("textarea",{ref:u,value:r,onChange:t=>b(t.target.value),className:"w-full h-64 resize-none rounded border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-primary/50 p-3 text-sm font-mono",placeholder:"åœ¨æ­¤è¾“å…¥ LaTeX ä»£ç ..."})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"å®æ—¶é¢„è§ˆ"}),e.jsx("div",{className:"w-full h-64 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 flex items-center justify-center overflow-auto p-4",children:f?e.jsxs("div",{className:"text-red-500 text-sm text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-3xl block mb-2",children:"error"}),f]}):h?e.jsx("div",{className:"text-gray-900 dark:text-gray-100",style:{fontSize:"1.5rem"},dangerouslySetInnerHTML:{__html:h}}):e.jsxs("div",{className:"text-gray-400 text-sm text-center",children:[e.jsx("span",{className:"material-symbols-outlined text-4xl block mb-2 opacity-50",children:"calculate"}),"è¾“å…¥å…¬å¼åå°†åœ¨æ­¤å¤„æ˜¾ç¤ºé¢„è§ˆ"]})}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:e.jsxs("p",{children:["ğŸ’¡ æç¤º: è¾“å…¥ä¸­æ–‡è¯·ä½¿ç”¨ \\text","{","ä¸­æ–‡","}",' æ ¼å¼,æˆ–ç‚¹å‡»"æ–‡æœ¬"åˆ†ç±»ä¸­çš„æ¨¡æ¿']})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-b-xl border-x border-b border-gray-200 dark:border-gray-700 p-3 flex flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:g,onChange:t=>O(t.target.value),className:"text-xs px-2 py-1.5 rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 focus:outline-none focus:ring-2 focus:ring-primary/50",children:[e.jsx("option",{value:"none",children:"æ— åŒ…è£¹"}),e.jsx("option",{value:"$$",children:"$$ åŒ…è£¹"}),e.jsx("option",{value:"$",children:"$ åŒ…è£¹"}),e.jsxs("option",{value:"equation",children:["\\begin","{","equation","}"," åŒ…è£¹"]})]}),e.jsxs("button",{onClick:R,disabled:!r,className:"flex items-center gap-1 px-4 py-2 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 rounded text-sm font-medium hover:bg-blue-200 dark:hover:bg-blue-900/50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"material-symbols-outlined text-base",children:"content_copy"}),"å¤åˆ¶ LaTeX ä»£ç "]})]}),e.jsxs("button",{onClick:X,disabled:!o,className:"flex items-center gap-1 px-4 py-2 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded text-sm font-medium hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"material-symbols-outlined text-base",children:"content_copy"}),"å¤åˆ¶åˆ° Word"]})]})]})]})};export{H as default};
